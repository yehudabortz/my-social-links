<section class="container">
    <div class="py-5 text-center">
        <% if logged_in? %>
        <h1>Welcome To My Social Links <%= @user.first_name %></h1>
        <% else %>
        <h1>Welcome To My Social Links</h1>
        <% end %>
        <h4>Browse Profiles</h4>
        <br>
        <% if logged_in? %>
        <div class="d-flex flex-column" style="margin-top: 25px; max-height: 55vh; overflow: scroll;"> 
            <div style="display: flex;">
                <h5>Recent Activity</h5>
            </div>
            <br>
            <% current_user.following.order(:updated_at).reverse.each do |user| %>
            <% unless user.username == current_user.username || user.links.empty? %>
                    <div class="d-flex flex-column">
                        <div style="display: flex;">
                                <a class="btn btn-dark" href="<%= user.username %>">@<%= user.username %></a>
                        </div>
                        <br>
                            <% user.links.order(:updated_at).reverse.each do |link| %>
                                <div style="display: flex;">
                                    <a class="btn btn-link" href="<%= link.format_url %>">Added â€“ <%= link.url %></a>
                                </div>
                            <% end %>
                        </div>
                <% end %>
            <% end %>
        </div>
        <br>
        <% end %>
        <div class="row">
            <% @users.each do |user| %>
            <a class="column" href="/<%= user.username %>">
                <div class="py-5 text-center">
                    <h4><%= user.first_name %> <%= user.last_name %></h4>
                    <p>@<%= user.username %></p>
                </div>
            </a>
            <% end %>
        </div>
    </div>
</section>