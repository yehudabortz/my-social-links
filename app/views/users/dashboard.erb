<section class="container">
    <div class="py-5 text-center">
        <h1>Welcome <%= @user.first_name %></h1>
        <form class="needs-validation" action="/logout" method="POST">
            <input type="hidden" name="_method" value="DELETE">
            <input class="btn btn-outline-primary" type="submit" value="Logout">
        </form>
      </div>
    <div>
        <form action="/link" method="POST">
            <label for="link_name">NAME</label>
            <input class="form-control" type="text" name="name" id="name"><br>
            <label for="add_link">URL</label>
            <input class="form-control" type="text" name="url" id="url"><br>
            <input class="btn btn-outline-primary" type="submit" value="Add New Link">
        </form>
    </div>
    <div>
    </section>
    <br>
    <section class="container">
        <table class="table table-bordered table-dark">
            <thead>
                <tr>
                    <th scope="col">Link Name</th>
                    <th scope="col">URL</th>
                    <th scope="col">Link</th>
                    <th scope="col"></th>
                </tr>
            </thead>
            <tbody>
                <% @user.links.each do |link| %>
                <form class="needs-validation" action="/link" method="POST" id="update-links-form">
                            <input type="hidden" name="_method" value="patch">
                            <tr class="dashboard-row">
                                <td>
                                    <input type="hidden" name="original_link[id][]" value="<%= link.id %>">
                                    <input class="form-control" type="text" id="<%= link.id %>" name="link[name][]" value="<%= link.name %>">
                                </td>
                                <td>
                                    <input class="form-control" type="text" name="link[url][]" value="<%= link.url %>">
                                </td>
                                <td>
                                    <a class="btn btn-link" href="<%= link.format_url %>"><%= link.name %></a>
                                </td>
                            </form>
                            <td>
                            <form class="row-form" action="/link" method="POST">
                                <input type="hidden" name="_method" value="DELETE">
                                    <input type="hidden" name="link[id]" value="<%= link.id %>">
                                    <input class="btn btn-outline-primary" type="submit" value="delete">
                                </form>
                            </td>
                            </tr>
                            <% end %>
                        </tbody>
                    </table>
                <button class="btn btn-primary" type="submit" form="update-links-form">Save Edits</button>
    </div>
</section>
