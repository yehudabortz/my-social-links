<section>
    <div>
        <h1>Welcome <%= @user.first_name %></h1>
        <a href="/logout">Logout</a>
    </div>
    <div>
        <form action="/link" method="POST">
            <label for="link_name">Link Name</label>
            <input type="text" name="name" id="name"><br>
            <label for="add_link">Add Link</label>
            <input type="text" name="url" id="url"><br>
            <input type="submit" value="Save">
        </form>
    </div>
    <div>
        <table>
            <thead>
                <tr>
                    <th>Link Name</th>
                    <th>URL</th>
                    <th>Link</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                <% @user.links.each do |link| %>
                <form action="/link" method="POST" id="update-links-form">
                            <input type="hidden" name="_method" value="patch">
                            <tr>
                                <td>
                                    <input type="hidden" name="original_link[id][]" value="<%= link.id %>">
                                    <input type="text" id="<%= link.id %>" name="link[name][]" value="<%= link.name %>">
                                </td>
                                <td>
                                    <input type="text" name="link[url][]" value="<%= link.url %>">
                                </td>
                                <td>
                                    <a href="<%= link.format_url %>"><%= link.name %></a>
                                </td>
                            </form>
                            <form action="/link" method="POST">
                                <input type="hidden" name="_method" value="DELETE">
                                <td>
                                    <input type="hidden" name="link[id]" value="<%= link.id %>">
                                    <input type="submit" value="delete">
                                </td>
                            </form>
                            </tr>
                            <% end %>
                        </tbody>
                    </table>
                <button type="submit" form="update-links-form">Save Edits</button>
    </div>
</section>
